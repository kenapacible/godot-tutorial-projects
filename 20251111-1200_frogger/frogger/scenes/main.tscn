[gd_scene load_steps=9 format=3 uid="uid://1vm17o6m07np"]

[ext_resource type="Texture2D" uid="uid://doghmovcgeltw" path="res://graphics/map.png" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://dghd7rii024ea" path="res://scenes/player.tscn" id="2_0wfyh"]
[ext_resource type="Script" uid="uid://5yp67n4die1i" path="res://scripts/car_manager.gd" id="3_jyhfs"]
[ext_resource type="PackedScene" uid="uid://cvd8bfxd3kq6g" path="res://scenes/car_spawner.tscn" id="3_sugp2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0wfyh"]
size = Vector2(384, 0.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sugp2"]
size = Vector2(1, 640)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyhfs"]
size = Vector2(384, 0.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tbgi4"]
size = Vector2(1, 640)

[node name="Game" type="Node2D"]

[node name="Map" type="Sprite2D" parent="."]
texture = ExtResource("1_o5qli")
centered = false

[node name="PlayerBounds" type="Node2D" parent="Map"]

[node name="Top" type="StaticBody2D" parent="Map/PlayerBounds"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/PlayerBounds/Top"]
position = Vector2(192, -0.125)
shape = SubResource("RectangleShape2D_0wfyh")

[node name="Bottom" type="StaticBody2D" parent="Map/PlayerBounds"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/PlayerBounds/Bottom"]
position = Vector2(192, 640.125)
shape = SubResource("RectangleShape2D_0wfyh")

[node name="Left" type="StaticBody2D" parent="Map/PlayerBounds"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/PlayerBounds/Left"]
position = Vector2(-0.5, 320)
shape = SubResource("RectangleShape2D_sugp2")

[node name="Right" type="StaticBody2D" parent="Map/PlayerBounds"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/PlayerBounds/Right"]
position = Vector2(384.5, 322)
shape = SubResource("RectangleShape2D_sugp2")

[node name="Objects" type="Node2D" parent="."]

[node name="Player" parent="Objects" instance=ExtResource("2_0wfyh")]
position = Vector2(20, 20)

[node name="Camera2D" type="Camera2D" parent="Objects/Player"]
zoom = Vector2(2, 2)
limit_left = 0
limit_top = 0
limit_right = 384
limit_bottom = 640
position_smoothing_enabled = true
position_smoothing_speed = 20.0
drag_horizontal_enabled = true
drag_vertical_enabled = true

[node name="CarManager" type="Node2D" parent="." node_paths=PackedStringArray("spawn_parent")]
script = ExtResource("3_jyhfs")
spawn_parent = NodePath("../Objects")

[node name="SpawnTimer" type="Timer" parent="CarManager"]
autostart = true

[node name="CarSpawners" type="Node2D" parent="CarManager"]

[node name="CarSpawner" parent="CarManager/CarSpawners" instance=ExtResource("3_sugp2")]
position = Vector2(394, 205)

[node name="CarSpawner2" parent="CarManager/CarSpawners" instance=ExtResource("3_sugp2")]
position = Vector2(394, 270)

[node name="CarDespawners" type="Node2D" parent="CarManager"]

[node name="Top" type="Area2D" parent="CarManager/CarDespawners"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="CarManager/CarDespawners/Top"]
position = Vector2(192, -40.125)
shape = SubResource("RectangleShape2D_jyhfs")

[node name="Bottom" type="Area2D" parent="CarManager/CarDespawners"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="CarManager/CarDespawners/Bottom"]
position = Vector2(192, 680.125)
shape = SubResource("RectangleShape2D_jyhfs")

[node name="Left" type="Area2D" parent="CarManager/CarDespawners"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="CarManager/CarDespawners/Left"]
position = Vector2(-40.5, 320)
shape = SubResource("RectangleShape2D_tbgi4")

[node name="Right" type="Area2D" parent="CarManager/CarDespawners"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="CarManager/CarDespawners/Right"]
position = Vector2(424.5, 322)
shape = SubResource("RectangleShape2D_tbgi4")

[connection signal="timeout" from="CarManager/SpawnTimer" to="CarManager" method="_on_timer_timeout"]
[connection signal="body_entered" from="CarManager/CarDespawners/Top" to="CarManager" method="_on_body_entered"]
[connection signal="body_entered" from="CarManager/CarDespawners/Bottom" to="CarManager" method="_on_body_entered"]
[connection signal="body_entered" from="CarManager/CarDespawners/Left" to="CarManager" method="_on_body_entered"]
[connection signal="body_entered" from="CarManager/CarDespawners/Right" to="CarManager" method="_on_body_entered"]
